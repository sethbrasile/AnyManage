---
phase: 06-voice-training-system
plan: 02
type: execute
wave: 2
depends_on: ["06-01"]
files_modified:
  - docs/protocols/voice-training.md
  - templates/VOICE_EXTRACTION_PROMPT.md
autonomous: true

must_haves:
  truths:
    - "User can initiate voice training with natural language or slash command"
    - "Agent performs capability assessment before starting extraction"
    - "Terminal-only environments generate a handoff prompt for capable harnesses"
    - "User selects content types before providing samples"
    - "Voice profile is displayed for review before saving"
  artifacts:
    - path: "docs/protocols/voice-training.md"
      provides: "Complete voice training protocol"
      min_lines: 200
    - path: "templates/VOICE_EXTRACTION_PROMPT.md"
      provides: "Portable extraction prompt for handoff"
      min_lines: 100
  key_links:
    - from: "docs/protocols/voice-training.md"
      to: "templates/VOICE_PROFILE_TEMPLATE.md"
      via: "profile structure reference"
      pattern: "VOICE_PROFILE_TEMPLATE"
    - from: "docs/protocols/voice-training.md"
      to: "templates/VOICE_EXTRACTION_PROMPT.md"
      via: "handoff prompt generation"
      pattern: "VOICE_EXTRACTION_PROMPT"
---

<objective>
Create the voice training protocol that guides the extraction workflow from start to finish.

Purpose: Define the complete voice training procedure including capability assessment, content type selection, sample collection, extraction, and profile creation. This is the core workflow that transforms user writing samples into a usable voice profile.

Output: Voice training protocol documentation and portable extraction prompt template for limited environments.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-voice-training-system/06-CONTEXT.md
@.planning/phases/06-voice-training-system/06-RESEARCH.md
@.planning/my_voice_example/seth_voice_profile.md
@.planning/my_voice_example/llm_implementation_guide.md
@.planning/phases/06-voice-training-system/06-01-SUMMARY.md
@INSTRUCTIONS.md
@templates/VOICE_PROFILE_TEMPLATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create voice training protocol</name>
  <files>docs/protocols/voice-training.md</files>
  <action>
Create the complete voice training protocol at `docs/protocols/voice-training.md`.

Follow the established protocol documentation format (trigger detection, normalization, core logic, error handling, examples, integration).

Structure:

```markdown
# Voice Training Protocol

**Purpose:** Guide users through voice profile creation from sample collection to profile storage.

**Triggers:**
- "Train my voice"
- "Create voice profile"
- "Learn my writing style"
- "/train-voice"

---

## Capability Assessment (FIRST)

Before starting voice training, assess available capabilities:

### Check 1: MCP Availability

```
Do I have access to Gmail MCP? (can fetch emails directly)
Do I have file system MCP? (can access local files)
Do I have file upload capability? (can accept drag-dropped documents)
```

### Check 2: Environment Type

```
Am I running in Claude Desktop/ChatGPT web? (full capability)
Am I running in terminal-only Claude Code? (limited capability)
```

### Route Based on Assessment

**If Gmail MCP or file upload available:**
- Proceed with direct extraction in this environment
- Guide user to provide samples via available method

**If terminal-only (no MCP, no file upload):**
- Explain limitation to user:
  "I'm running in a terminal environment without file access. For the best voice training experience, I recommend using Claude Desktop or ChatGPT web where you can easily share writing samples."
- Offer two options:
  1. Generate a portable extraction prompt user takes to capable environment
  2. Continue with copy-paste (warn this requires terminal comfort)
- If user chooses handoff: Generate prompt from `templates/VOICE_EXTRACTION_PROMPT.md`
- If user prefers copy-paste: Continue with guidance for pasting samples

**MCP Setup Guidance:**
If user asks about setting up MCP:
- Explain MCP (Model Context Protocol) enables direct access to Gmail, files, etc.
- Point to MCP documentation for setup
- Clarify this is optional - handoff workflow works without MCP

---

## Content Type Selection

Present content type options:

```
Which types of writing do you want me to learn?

1. **Emails** - Client communication, business correspondence
2. **Technical Documentation** - READMEs, guides, process docs
3. **Chat Messages** - Slack, Teams, informal communication
4. **Reports/Proposals** - Formal documents, presentations

Select 1-3 types you use most often (enter numbers like "1, 2"):
```

**Validation:**
- Accept 1-4 selections
- If user selects more than 4: "Let's focus on 3-4 types to keep training manageable"
- If user selects 0: "Please select at least one content type to train"

**Store selections** for use in extraction.

---

## Sample Collection

For each selected content type, request samples:

### Sample Request Script

```
For [CONTENT_TYPE], please share 5-10 examples of YOUR actual writing.

Good samples:
- Variety of recipients/contexts
- Different lengths (short and long)
- Your natural voice (not heavily edited or AI-generated)

Avoid:
- AI-generated content
- Heavily templated responses
- Very old writing (your voice may have evolved)

[If MCP available]: I can fetch emails directly from your Gmail - want me to?
[If paste required]: Please paste your samples below, separated by "---" or numbered.
```

### Sample Validation

- Minimum: 5 samples per content type
- Maximum: 15 samples per content type (more isn't necessarily better)
- If user provides fewer than 5: "A few more samples would help me capture your voice better. Can you add 2-3 more?"
- If user provides AI-generated content (detect formal patterns): "Some of these look AI-generated. For best results, please share writing you authored yourself."

### Sample Storage (During Session)

Store samples in memory during extraction. Do NOT write samples to files (privacy).

---

## Voice Extraction

After collecting all samples, run extraction:

### Extraction Process

1. **Analyze each content type separately** - patterns may differ
2. **Look for recurring patterns across samples:**
   - Sentence structure (length, fragments, run-ons)
   - Punctuation habits (contractions, dashes, parentheses)
   - Signature phrases and markers
   - Hedging language
   - Humor style
   - Opening patterns
   - Closing patterns
3. **Identify anti-patterns** - what user NEVER does
4. **Build quality checklist** based on extracted patterns

### Extraction Template

Use `templates/VOICE_PROFILE_TEMPLATE.md` as structure.

Fill in each section based on pattern analysis:
- Replace [placeholders] with specific observations
- Include concrete examples from samples
- Be specific: "Uses 'lol' to soften potentially awkward statements" not "Uses humor occasionally"

---

## Profile Review

Display the complete voice profile for user review BEFORE saving:

### Review Script

```
Here's your voice profile based on the samples you provided:

[FULL VOICE PROFILE]

---

Does this capture your voice accurately?

- If yes: Say "Save it" or "Looks good"
- If something's off: Tell me what to adjust
- If you want to start over: Say "Let's redo this"
```

**Handle feedback:**
- User approves: Proceed to save
- User requests changes: Make specific edits, show updated profile
- User wants to redo: Return to sample collection

---

## Profile Storage

Save approved profile to appropriate location:

### Storage Priority

1. **Primary:** `~/.agent-pm/voice/voice_profile.md`
   - Create directory if doesn't exist: `mkdir -p ~/.agent-pm/voice/`
   - Portable across projects (same voice follows user)

2. **Fallback (if home directory write fails):** `ops/voice/voice_profile.md`
   - Project-specific storage
   - Still functional, just not portable

### Save Confirmation

```
Your voice profile has been saved to [LOCATION].

The system will now use your voice for:
- Client emails (auto-applied)
- Proposals and external docs (auto-applied)
- Other content types (on request)

To test it: "Write an email to [client] about [topic]"

Tip: When you edit AI-generated content before sending, paste your edits so I can learn from them!
```

---

## Error Handling

### User Abandons Mid-Training

If user doesn't complete training:
- Do NOT save partial profile
- Inform: "Voice training wasn't completed. Say 'Train my voice' when you're ready to finish."
- No checkpoint needed (samples are in memory only)

### Extraction Quality Issues

If extracted patterns are too generic:
- Request more diverse samples
- Ask about specific scenarios: "How do you typically start emails to new clients?"

### Write Permission Errors

If can't write to home directory:
- Try fallback location
- If both fail: Show profile and offer to copy to clipboard for manual save

---

## Integration

### Related Protocols

- `voice-application.md` - Applying voice to output
- `correction-learning.md` - Learning from user corrections
- `specialist-coordination.md` - Specialists using voice profiles

### INSTRUCTIONS.md Reference

Voice Training section in INSTRUCTIONS.md points to this protocol.

### Skill Integration

Voice training can be invoked as skill: `.github/skills/train-voice.md` (optional)

---

## Examples

### Example 1: Full Capability Flow

```
User: Train my voice

Agent: [Capability check: Gmail MCP available]

I can train the system to write in your voice. I have access to your Gmail,
which makes sample collection easy.

Which types of writing do you want me to learn?
1. Emails
2. Technical Documentation
3. Chat Messages
4. Reports/Proposals

Select 1-3 types (enter numbers like "1, 2"):

User: 1, 2

Agent: Great! Let's start with Emails.

I can fetch recent emails you've sent. Want me to grab your last 10 sent emails?
Or would you prefer to share specific ones?

User: Grab my last 10

[Agent fetches, extracts, shows profile, user approves, saves]
```

### Example 2: Terminal-Only Handoff

```
User: Train my voice

Agent: [Capability check: Terminal-only, no MCP]

I'd love to help train your voice! I'm currently running in a terminal
environment without file access, which makes sample collection tricky.

For the best experience, I recommend:

**Option 1 (Recommended):** I'll generate a complete extraction prompt you can
use in Claude Desktop or ChatGPT web. Complete the training there, then bring
the profile back here.

**Option 2:** We can do copy-paste training here, but you'll need to paste
5-10 writing samples for each content type.

Which would you prefer?

User: Option 1

Agent: [Generates portable prompt from VOICE_EXTRACTION_PROMPT.md]

Here's your portable voice training prompt. Copy this entire block and paste
it into Claude Desktop or ChatGPT web:

---
[PORTABLE PROMPT]
---

After completing training there, paste the resulting voice profile here and
I'll save it for you.
```

### Example 3: Profile Review and Adjustment

```
Agent: Here's your voice profile:

[Shows profile]

Does this capture your voice accurately?

User: The email section is good but I don't actually use "lol" - that's just
with close friends

Agent: Got it! I'll update the profile to note that "lol" is reserved for
informal contexts with close contacts, not standard business communication.

[Shows updated profile]

How's this version?

User: Perfect, save it

Agent: [Saves to ~/.agent-pm/voice/voice_profile.md]

Your voice profile has been saved...
```

---

*Protocol version: 1.0*
*Created: [DATE]*
```

This protocol covers:
- VOIC-01 (voice training exercise)
- VOIC-02 (example types)
- VOIC-03 (LLM-assisted extraction)
- VOIC-04 (voice profile storage)
  </action>
  <verify>File exists at docs/protocols/voice-training.md with all sections: capability assessment, content type selection, sample collection, extraction, review, storage</verify>
  <done>Voice training protocol exists with complete workflow from capability assessment through profile storage</done>
</task>

<task type="auto">
  <name>Task 2: Create portable extraction prompt template</name>
  <files>templates/VOICE_EXTRACTION_PROMPT.md</files>
  <action>
Create the portable extraction prompt template that users can take to Claude Desktop or ChatGPT web when running in terminal-only environments.

This prompt must be self-contained with all instructions needed to complete voice extraction in another environment.

```markdown
# Voice Extraction Prompt (Portable)

**Use this when:** You're completing voice training in Claude Desktop, ChatGPT web, or another environment with file/paste capabilities.

**After completing:** Copy the resulting voice profile and bring it back to agent-pm.

---

## COPY EVERYTHING BELOW THIS LINE

---

# Voice Profile Extraction

I need you to analyze my writing samples and create a comprehensive voice profile. This profile will be used by AI systems to write content that sounds authentically like me.

## What I Need

Analyze my writing samples and extract:

1. **Core Voice DNA** - My fundamental writing patterns:
   - Sentence structure (length patterns, fragments, run-ons)
   - Punctuation style (contractions, dashes, parentheses)
   - Signature traits (recurring patterns unique to me)
   - Hedging language (how I express uncertainty)
   - Intensifiers (my casual amplifiers)
   - Humor style (if present)

2. **Content-Type Patterns** - For each type of writing I provide:
   - Opening patterns (DO and DON'T)
   - Body structure (DO and DON'T)
   - Closing patterns (DO and DON'T)

3. **Anti-Patterns** - Phrases and patterns I NEVER use

4. **Quality Checklist** - Verification items based on my patterns

## Output Format

Create a markdown document with these sections:

```
# [My Name] - Voice Profile

## Overview
[Brief description of my voice]

## CORE VOICE DNA
### Sentence Structure
### Punctuation Style
### Signature Traits
### Hedging Language
### Intensifiers
### Humor Style

## EMAIL PATTERNS (if I provided email samples)
### Openings
### Body Structure
### Closings

## TECHNICAL COMMUNICATION (if I provided technical samples)
### Explaining Concepts
### Technical Details

## CHAT/INFORMAL PATTERNS (if I provided chat samples)
### Message Length
### Tone Markers

## RELATIONSHIP CALIBRATION
### Professional Clients
### Business Partners / Team
### Casual/Familiar Recipients

## WHAT AI TYPICALLY DOES WRONG
[With specific examples of AI vs my voice]

## THINGS I NEVER SAY
[Bullet list]

## QUALITY CHECKLIST
[Checkboxes based on my patterns]
```

## My Writing Samples

**Content Types I'm Training:**
- [USER: List your selected content types here]

### [Content Type 1] Samples

**Sample 1:**
[USER: Paste sample here]

**Sample 2:**
[USER: Paste sample here]

[Continue for 5-10 samples per content type]

### [Content Type 2] Samples (if applicable)

[Same format]

---

## Important Notes

- Be SPECIFIC with examples from my actual samples
- Include concrete phrases I use, not generic descriptions
- Anti-patterns are CRITICAL - note what I never do
- If you see patterns I might not be aware of, include them
- The quality checklist should be actionable verification items

---

## My Name
[USER: Enter your name here]

---

**After you generate the profile, I will review it and may request adjustments before finalizing.**

---

## END OF PROMPT - PASTE YOUR SAMPLES ABOVE AND RUN

---

# Instructions for Completing This Exercise

1. Fill in your content types at "[USER: List your selected content types here]"
2. Paste 5-10 writing samples per content type in the designated areas
3. Enter your name at "[USER: Enter your name here]"
4. Send to Claude Desktop or ChatGPT web
5. Review the generated profile
6. Request any adjustments
7. Copy the final profile
8. Return to agent-pm and paste it when prompted

**Your final profile should be saved to:** `~/.agent-pm/voice/voice_profile.md`
```

This template:
- Is completely self-contained
- Follows the reference implementation structure
- Includes clear user instructions
- Can be used in any capable LLM environment
  </action>
  <verify>File exists at templates/VOICE_EXTRACTION_PROMPT.md with complete self-contained extraction prompt including output format, sample placeholders, and user instructions</verify>
  <done>Portable extraction prompt template exists for terminal-only environment handoff</done>
</task>

</tasks>

<verification>
After all tasks complete:

1. **Voice training protocol exists:**
   - `docs/protocols/voice-training.md` exists
   - Contains capability assessment section
   - Contains content type selection
   - Contains sample collection guidance
   - Contains extraction process
   - Contains profile review before save
   - Contains storage priority (home > project)
   - Contains error handling
   - Contains examples

2. **Portable extraction prompt exists:**
   - `templates/VOICE_EXTRACTION_PROMPT.md` exists
   - Is self-contained (no external references needed)
   - Includes output format matching voice profile template
   - Includes clear user instructions for completing handoff

3. **Integration points:**
   - Protocol references VOICE_PROFILE_TEMPLATE.md
   - Protocol references VOICE_EXTRACTION_PROMPT.md
   - Protocol mentions voice-application.md (to be created)
   - Protocol mentions correction-learning.md (to be created)
</verification>

<success_criteria>
1. User can invoke voice training with "Train my voice" or "/train-voice"
2. Agent performs capability assessment and routes appropriately
3. Terminal-only environments generate complete handoff prompt
4. Content type selection presents 4 options, accepts 1-4 selections
5. Sample requirements are 5-10 per content type
6. Profile is shown for review before saving
7. Storage uses home directory as primary, project as fallback
</success_criteria>

<output>
After completion, create `.planning/phases/06-voice-training-system/06-02-SUMMARY.md`
</output>
