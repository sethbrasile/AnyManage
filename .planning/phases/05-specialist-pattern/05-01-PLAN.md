---
phase: 05-specialist-pattern
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .claude/agents/.gitkeep
  - .claude/agents/assessment-specialist.md
  - docs/domain/.gitkeep
  - templates/deliverables/AUDIT_FINDINGS_TEMPLATE.md
  - entities/.gitkeep (documentation update)
autonomous: true

must_haves:
  truths:
    - "Specialist directory exists and is documented"
    - "Domain knowledge folder exists for industry playbooks"
    - "Assessment specialist can be invoked for audits"
    - "Deliverable template guides structured output"
  artifacts:
    - path: ".claude/agents/assessment-specialist.md"
      provides: "Assessment/audit domain expert persona"
      contains: "name: assessment-specialist"
    - path: "docs/domain/.gitkeep"
      provides: "Domain knowledge layer placeholder"
    - path: "templates/deliverables/AUDIT_FINDINGS_TEMPLATE.md"
      provides: "Deliverable structure template"
      contains: "Executive Summary"
  key_links:
    - from: ".claude/agents/assessment-specialist.md"
      to: "docs/domain/"
      via: "knowledge loading protocol"
      pattern: "docs/domain/"
    - from: ".claude/agents/assessment-specialist.md"
      to: "entities/[Entity]/deliverables/"
      via: "deliverable output path"
      pattern: "entities.*deliverables"
---

<objective>
Create specialist infrastructure and assessment specialist for domain expert AI personas.

Purpose: Establish the foundation for specialists (subagents) and deliver the first working specialist that can conduct assessments and audits. This enables users to delegate domain-specific work to expert AI personas.

Output: Directory structure for specialists and knowledge layers, plus a fully functional assessment-specialist.md that follows Claude Code subagent patterns.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-specialist-pattern/05-CONTEXT.md
@.planning/phases/05-specialist-pattern/05-RESEARCH.md
@INSTRUCTIONS.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create specialist and knowledge directory structure</name>
  <files>
    .claude/agents/.gitkeep
    docs/domain/.gitkeep
    templates/deliverables/AUDIT_FINDINGS_TEMPLATE.md
  </files>
  <action>
Create the directory infrastructure for specialists and knowledge layers:

1. **Create .claude/agents/ directory** with .gitkeep containing:
   - Purpose explanation: "Specialist subagent definitions (domain expert personas)"
   - Contrast with skills: "Specialists differ from skills - they are personas with domain expertise that produce deliverables, not procedures"
   - File format: "Each specialist is a .md file with YAML frontmatter (name, description, tools, model) + Markdown system prompt"
   - Note that personal specialists go in ~/.claude/agents/

2. **Create docs/domain/ directory** with .gitkeep containing:
   - Purpose: "Domain knowledge layer - industry-specific playbooks and frameworks"
   - Organization: "Subfolders by domain when multiple domains apply (e.g., docs/domain/marketing/, docs/domain/legal/)"
   - Usage: "Specialists load relevant domain knowledge before work"
   - Note: "CONFIG.md can specify active domain for multi-domain setups"

3. **Create templates/deliverables/ directory** with AUDIT_FINDINGS_TEMPLATE.md:
   - Standard deliverable template structure
   - Sections: Generated header, Executive Summary, Strengths, Gaps and Issues (Critical/Important/Minor), Opportunities, Recommended Next Steps
   - No frontmatter/metadata - pure content (per CONTEXT.md decision)
   - Footer with specialist attribution

Note about entity knowledge and deliverables folders: These are created per-entity by the entity onboarding protocol. Document the convention in .claude/agents/.gitkeep that entities will have:
- entities/[Entity]/knowledge/ - learned context
- entities/[Entity]/deliverables/ - specialist outputs
- entities/[Entity]/internal/ - internal-only content

Do NOT modify the entity onboarding protocol in this task - just document the expected structure.
  </action>
  <verify>
    ls -la .claude/agents/ && ls -la docs/domain/ && ls -la templates/deliverables/
    cat .claude/agents/.gitkeep | head -20
    cat templates/deliverables/AUDIT_FINDINGS_TEMPLATE.md | head -30
  </verify>
  <done>
    - .claude/agents/ directory exists with documented .gitkeep
    - docs/domain/ directory exists with documented .gitkeep
    - templates/deliverables/AUDIT_FINDINGS_TEMPLATE.md exists with standard structure
  </done>
</task>

<task type="auto">
  <name>Task 2: Create assessment-specialist.md</name>
  <files>.claude/agents/assessment-specialist.md</files>
  <action>
Create the assessment specialist following Claude Code subagent format from RESEARCH.md:

**YAML Frontmatter:**
```yaml
---
name: assessment-specialist
description: Domain expert for conducting assessments, audits, and gap analyses. Use when user asks for assessment, audit, gap analysis, current state evaluation, or needs to understand where an entity stands. Produces structured AUDIT_FINDINGS documents.
tools: Read, Grep, Glob, Write
model: sonnet
---
```

**Markdown Body (System Prompt):**

1. **Role definition:** Assessment specialist with expertise in audits and gap analyses

2. **Knowledge Loading Protocol:** Four layers to load before any assessment:
   - Layer 1 (Base PM): Read INSTRUCTIONS.md for core protocols
   - Layer 2 (Domain): Read docs/domain/ files matching industry/domain
   - Layer 3 (Agency): Read ops/preferences/, ops/processes/, ops/style/ for agency standards
   - Layer 4 (Entity): Read entities/[Entity]/ENTITY_PROFILE.md and entities/[Entity]/knowledge/ fully
   - Progressive loading: summaries first, details as needed

3. **Sensitivity Protocol:** Before writing deliverable:
   - Check if deliverable is client-facing
   - Scan for INTERNAL_*.md files, internal/ subfolders, <!-- INTERNAL --> markers
   - If internal content found and deliverable is client-facing: STOP and warn user
   - Ask user to confirm exclusion approach before proceeding

4. **Deliverable Format:**
   - Save to: entities/[Entity]/deliverables/AUDIT_FINDINGS_[DATE].md
   - Use templates/deliverables/AUDIT_FINDINGS_TEMPLATE.md as structure guide
   - Pure content only - no metadata/frontmatter

5. **Workflow:**
   - Announce: "Starting assessment for [Entity]..."
   - Load knowledge (4 layers)
   - Check sensitivity
   - Conduct assessment using domain frameworks
   - Produce deliverable file
   - Capture learned context if applicable (append to entities/[Entity]/knowledge/LEARNED_CONTEXT.md)
   - Return brief summary with link to deliverable

6. **Batch Processing:**
   - Announce: "Running assessment for [N] entities..."
   - Update per entity: "Completed [Entity]... ([N]/[Total])"
   - Final summary with all results and links

7. **Knowledge Auto-Capture:**
   - After deliverable, note entity-specific insights discovered
   - Append to entities/[Entity]/knowledge/LEARNED_CONTEXT.md
   - Format: timestamp, source, bullet points
   - Brief note at end: "Added [insight type] to entity knowledge"
  </action>
  <verify>
    cat .claude/agents/assessment-specialist.md
    grep -c "name: assessment-specialist" .claude/agents/assessment-specialist.md
    grep -c "INTERNAL" .claude/agents/assessment-specialist.md
  </verify>
  <done>
    - assessment-specialist.md exists with YAML frontmatter
    - Contains knowledge loading protocol (4 layers)
    - Contains sensitivity detection protocol
    - Contains deliverable format and workflow
    - Contains batch processing instructions
    - Contains knowledge auto-capture protocol
  </done>
</task>

</tasks>

<verification>
After both tasks complete:

1. Directory structure exists:
   - .claude/agents/ with .gitkeep and assessment-specialist.md
   - docs/domain/ with .gitkeep
   - templates/deliverables/ with AUDIT_FINDINGS_TEMPLATE.md

2. Assessment specialist is properly formatted:
   - Valid YAML frontmatter (name, description, tools, model)
   - Complete system prompt with all protocols
   - References correct file paths for knowledge and deliverables

3. Template provides structured guidance:
   - All sections from RESEARCH.md deliverable format
   - No metadata - pure content
</verification>

<success_criteria>
- [ ] .claude/agents/ directory created and documented
- [ ] docs/domain/ directory created for domain knowledge layer
- [ ] templates/deliverables/AUDIT_FINDINGS_TEMPLATE.md created with standard structure
- [ ] assessment-specialist.md created with Claude Code subagent format
- [ ] Knowledge loading protocol includes all 4 layers
- [ ] Sensitivity detection protocol blocks internal content leakage
- [ ] Deliverable naming uses date suffix (AUDIT_FINDINGS_[DATE].md)
</success_criteria>

<output>
After completion, create `.planning/phases/05-specialist-pattern/05-01-SUMMARY.md`
</output>
