---
phase: 05-specialist-pattern
plan: 03
type: execute
wave: 3
depends_on: ["05-02"]
files_modified:
  - docs/protocols/specialist-coordination.md
  - docs/protocols/entity-onboarding.md
autonomous: true

must_haves:
  truths:
    - "Specialist coordination protocol fully documented"
    - "Entity onboarding creates knowledge and deliverables folders"
    - "Knowledge auto-capture pattern documented"
    - "Sensitivity classification rules are clear"
  artifacts:
    - path: "docs/protocols/specialist-coordination.md"
      provides: "Full specialist coordination protocol"
      contains: "Knowledge Loading Protocol"
    - path: "docs/protocols/entity-onboarding.md"
      provides: "Updated entity structure with knowledge folders"
      contains: "deliverables/"
  key_links:
    - from: "docs/protocols/specialist-coordination.md"
      to: ".claude/agents/"
      via: "specialist location reference"
      pattern: "\\.claude/agents/"
    - from: "docs/protocols/entity-onboarding.md"
      to: "entities/[Entity]/knowledge/"
      via: "folder creation"
      pattern: "knowledge/"
---

<objective>
Create specialist coordination protocol and update entity onboarding for knowledge folders.

Purpose: Document the full specialist coordination workflow for reference, and update entity onboarding to create the knowledge infrastructure that specialists need. This completes the specialist pattern by ensuring entities are ready for specialist work.

Output: Comprehensive specialist-coordination.md protocol and updated entity-onboarding.md with knowledge/deliverables folder creation.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-specialist-pattern/05-CONTEXT.md
@.planning/phases/05-specialist-pattern/05-RESEARCH.md
@INSTRUCTIONS.md
@docs/protocols/entity-onboarding.md
@.claude/agents/assessment-specialist.md
@.claude/agents/strategy-specialist.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create specialist coordination protocol</name>
  <files>docs/protocols/specialist-coordination.md</files>
  <action>
Create comprehensive specialist coordination protocol following the documentation pattern from Phase 2 protocols (trigger detection, core logic, error handling, examples).

**Structure:**

```markdown
# Specialist Coordination Protocol

Specialists are domain expert AI personas that produce structured deliverables.

## Quick Reference

| Aspect | Pattern |
|--------|---------|
| Storage | .claude/agents/ (project), ~/.claude/agents/ (personal) |
| Format | YAML frontmatter + Markdown system prompt |
| Invocation | Natural language OR explicit naming |
| Output | entities/[Entity]/deliverables/[TYPE]_[DATE].md |

## Trigger Detection

[Natural language patterns, explicit naming, batch patterns]

## Specialist Discovery

[How "What specialists do you have?" or "/specialists" works]

## Knowledge Loading Protocol

[Full four-layer documentation with progressive loading]

## Sensitivity Classification

[File-level and section-level markers, detection before generation]

## Deliverable Management

[Naming, location, templates, versioning]

## Knowledge Auto-Capture

[When to capture, what to capture, format, where to store]

## Batch Processing

[Announce pattern, per-entity updates, final summary]

## Coordination Between Specialists

[File-based handoff - strategy reads assessment deliverable]

## Error Handling

[Missing entity, internal content detected, assessment prerequisite]

## Examples

[Full invocation examples with expected output]
```

Include all patterns from RESEARCH.md:
- Knowledge Loading Protocol (4 layers with progressive loading)
- Sensitivity Detection (INTERNAL_*, internal/, <!-- INTERNAL -->)
- Deliverable naming (TYPE_DATE.md)
- Knowledge auto-capture (LEARNED_CONTEXT.md)
- Batch processing announce pattern
- Cross-specialist coordination (file-based handoff)
  </action>
  <verify>
    wc -l docs/protocols/specialist-coordination.md
    grep -c "Knowledge Loading" docs/protocols/specialist-coordination.md
    grep -c "INTERNAL" docs/protocols/specialist-coordination.md
    grep -c "Batch" docs/protocols/specialist-coordination.md
  </verify>
  <done>
    - specialist-coordination.md exists with 200+ lines
    - Contains Knowledge Loading Protocol section
    - Contains Sensitivity Classification section
    - Contains Batch Processing section
    - Contains Examples section
  </done>
</task>

<task type="auto">
  <name>Task 2: Update entity onboarding for knowledge folders</name>
  <files>docs/protocols/entity-onboarding.md</files>
  <action>
Read the existing entity-onboarding.md protocol and update it to include knowledge infrastructure creation.

**Changes to make:**

1. **Update folder structure section** to include new folders:
   ```
   entities/[Entity Name]/
     ENTITY_PROFILE.md      <- from template
     ENTITY_ROADMAP.md      <- from template
     notes/                 <- meeting notes, etc.
       archive/             <- processed notes
     knowledge/             <- NEW: learned context from specialists
     deliverables/          <- NEW: specialist work products
     internal/              <- NEW: internal-only content
   ```

2. **Add folder creation to the creation steps:**
   After creating notes/ folder, also create:
   - `knowledge/` - "Learned context captured by specialists during their work"
   - `deliverables/` - "Specialist work products (assessments, strategies, etc.)"
   - `internal/` - "Internal-only content not shared with entity (pricing, margins, notes)"

3. **Add note about internal folder:**
   "The `internal/` folder and any files prefixed with `INTERNAL_` are automatically excluded from client-facing deliverables by specialists."

4. **Do NOT change:**
   - The trigger detection logic
   - The name normalization rules
   - The duplicate detection logic
   - The template copying logic
   - The ROADMAP.md update logic
   - The error handling patterns

Keep all existing content - only ADD the new folder creation and documentation.
  </action>
  <verify>
    grep "knowledge/" docs/protocols/entity-onboarding.md
    grep "deliverables/" docs/protocols/entity-onboarding.md
    grep "internal/" docs/protocols/entity-onboarding.md
  </verify>
  <done>
    - entity-onboarding.md includes knowledge/ folder in structure
    - entity-onboarding.md includes deliverables/ folder in structure
    - entity-onboarding.md includes internal/ folder in structure
    - Existing protocol logic unchanged
  </done>
</task>

</tasks>

<verification>
After both tasks complete:

1. Specialist coordination protocol is comprehensive:
   - All patterns from RESEARCH.md documented
   - Examples show realistic invocation scenarios
   - Error handling covers common failure modes

2. Entity onboarding updated:
   - New folders documented in structure diagram
   - Folder creation steps updated
   - Internal folder purpose explained
   - No changes to existing logic (trigger, normalization, duplicate detection)
</verification>

<success_criteria>
- [ ] specialist-coordination.md created with 200+ lines
- [ ] Knowledge Loading Protocol (4 layers) fully documented
- [ ] Sensitivity Classification (3 marker types) documented
- [ ] Deliverable Management (naming, location, templates) documented
- [ ] Knowledge Auto-Capture pattern documented
- [ ] Batch Processing announce pattern documented
- [ ] entity-onboarding.md includes knowledge/ folder
- [ ] entity-onboarding.md includes deliverables/ folder
- [ ] entity-onboarding.md includes internal/ folder
- [ ] Existing onboarding logic preserved
</success_criteria>

<output>
After completion, create `.planning/phases/05-specialist-pattern/05-03-SUMMARY.md`
</output>
