---
phase: 04-skill-system-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .claude/skills/.gitkeep
  - .opencode/skills/.gitkeep
  - .github/skills/.gitkeep
  - docs/protocols/skill-discovery.md
  - INSTRUCTIONS.md
autonomous: true

must_haves:
  truths:
    - "Skill directories exist for Claude Code, opencode, and cross-platform usage"
    - "User can ask 'What skills do you have?' and receive a formatted response"
    - "INSTRUCTIONS.md references skill system and discovery protocol"
  artifacts:
    - path: ".claude/skills/.gitkeep"
      provides: "Claude Code skill directory"
    - path: ".opencode/skills/.gitkeep"
      provides: "opencode skill directory"
    - path: ".github/skills/.gitkeep"
      provides: "Cross-platform skill directory (recommended)"
    - path: "docs/protocols/skill-discovery.md"
      provides: "Skill discovery protocol documentation"
      min_lines: 80
    - path: "INSTRUCTIONS.md"
      provides: "Updated agent instructions with skill system reference"
      contains: "Skills"
  key_links:
    - from: "INSTRUCTIONS.md"
      to: "docs/protocols/skill-discovery.md"
      via: "reference in Core Workflows section"
      pattern: "docs/protocols/skill-discovery.md"
---

<objective>
Create the skill system infrastructure: directory structure for skills across all supported agents, skill discovery protocol documentation, and INSTRUCTIONS.md updates to reference the skill system.

Purpose: Enable skills to be stored and discovered consistently across Claude Code, opencode, and other agents. Establish the foundation that Plan 04-02 will populate with actual skills.

Output: Skill directories, discovery protocol, updated INSTRUCTIONS.md
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-skill-system-foundation/04-CONTEXT.md
@.planning/phases/04-skill-system-foundation/04-RESEARCH.md
@INSTRUCTIONS.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create skill directory structure</name>
  <files>
    .claude/skills/.gitkeep
    .opencode/skills/.gitkeep
    .github/skills/.gitkeep
  </files>
  <action>
Create skill directories for all supported agents:

1. `.claude/skills/` - Claude Code native skill location
2. `.opencode/skills/` - opencode native skill location
3. `.github/skills/` - Cross-platform skill location (recommended for portability)

Each directory gets a `.gitkeep` file to ensure the empty directory is tracked in git.

The `.github/skills/` location is the recommended canonical location per Agent Skills 1.0 standard (Dec 2025). Agent-specific directories provide backward compatibility and allow agent-specific overrides.
  </action>
  <verify>
ls -la .claude/skills/ .opencode/skills/ .github/skills/
# Should show .gitkeep in each directory
  </verify>
  <done>Three skill directories exist with .gitkeep files</done>
</task>

<task type="auto">
  <name>Task 2: Create skill discovery protocol</name>
  <files>docs/protocols/skill-discovery.md</files>
  <action>
Create `docs/protocols/skill-discovery.md` following the established protocol documentation format from Phase 3.

Include these sections:

**Trigger Detection:**
- Natural language: "What skills do you have?", "Show me your skills", "What can you do?"
- Slash command: `/skills` (if implemented)

**Discovery Response Format:**
```
I have several workflows available to help you:

**Managing Entities:**
- Process notes - Extract tasks and profile updates from meeting notes
- Get status - Show current state of entities
- Weekly review - Generate status report across all entities

**Best part:** You don't need to remember these. Just describe what you want in plain English.

Want details on a specific skill? Ask "How does [skill name] work?"
```

**How Skills Work:**
- Skills are invisible to users by default
- Agent matches user intent to skill descriptions automatically
- Both natural language and slash commands work equally
- Skills reference existing protocols (no duplication)

**Skill Loading Protocol:**
- At startup: Load only skill metadata (name + description from YAML frontmatter)
- On match: Load full SKILL.md content
- Token budget: ~50 tokens per skill for metadata, 2000-5000 for full skill

**Skill Locations:**
- `.github/skills/` - Recommended (cross-platform)
- `.claude/skills/` - Claude Code specific
- `.opencode/skills/` - opencode specific
- Agent-specific overrides: If same skill exists in agent dir AND .github/skills/, agent dir wins

**Batch Operations:**
- Skills support batch processing: "process notes for all clients"
- Progress shown during batch: "Processing 3 entities... (1/3 complete)"
- Results aggregated in summary

**Error Handling:**
- Skill not found: Agent uses general capabilities to help
- Multiple matches: Agent picks best match or asks for clarification
- Skill fails: Log error, report to user in plain English, suggest alternatives

Reference the existing protocols (note-processing, entity-onboarding, profile-building) as examples of the detailed procedures that skills invoke.
  </action>
  <verify>
cat docs/protocols/skill-discovery.md | head -50
# Should show structured protocol documentation
  </verify>
  <done>Skill discovery protocol exists with trigger detection, response format, and loading protocol</done>
</task>

<task type="auto">
  <name>Task 3: Update INSTRUCTIONS.md with skill system reference</name>
  <files>INSTRUCTIONS.md</files>
  <action>
Update INSTRUCTIONS.md to reference the skill system. Add a new section after "Core Workflows" or integrate into existing structure.

Add to Core Workflows section (or create new Skills section):

```markdown
## Skills

Skills are reusable workflows that encode best practices. Users don't need to know skill names - just describe what you want.

**Discovery:** User asks "What skills do you have?" -> Show available workflows. See `docs/protocols/skill-discovery.md`.

**Invocation:** Natural language and slash commands both work:
- "Process notes for Acme" = `/process-notes Acme`
- "Run weekly review" = `/weekly-review`

**Batch operations:** "Process notes for all clients" works as one request.

**PM Base Skills:**
- process-notes - Extract tasks from meeting notes
- get-status - Show entity status
- weekly-review - Generate weekly status report

Skills are stored in `.github/skills/` (cross-platform) and `.claude/skills/` (agent-specific).
```

Keep the addition concise (~15 lines). Detailed protocol is in skill-discovery.md.
  </action>
  <verify>
grep -A 20 "## Skills" INSTRUCTIONS.md || grep -A 20 "Skills" INSTRUCTIONS.md
# Should show skill system reference
  </verify>
  <done>INSTRUCTIONS.md includes skill system overview with discovery and invocation patterns</done>
</task>

</tasks>

<verification>
1. Skill directories exist:
   - `ls .claude/skills/.gitkeep` succeeds
   - `ls .opencode/skills/.gitkeep` succeeds
   - `ls .github/skills/.gitkeep` succeeds

2. Discovery protocol documented:
   - `docs/protocols/skill-discovery.md` exists
   - Contains trigger detection section
   - Contains response format section
   - Contains skill loading protocol

3. INSTRUCTIONS.md updated:
   - References skill system
   - Lists PM base skills (process-notes, get-status, weekly-review)
   - References skill-discovery.md protocol
</verification>

<success_criteria>
- Skill directories exist for all three agent platforms
- Skill discovery protocol is fully documented
- INSTRUCTIONS.md references skills and points to protocol
- No duplication of existing protocol content (skills reference protocols)
</success_criteria>

<output>
After completion, create `.planning/phases/04-skill-system-foundation/04-01-SUMMARY.md`
</output>
