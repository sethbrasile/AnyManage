---
phase: 02-agent-instruction-layer
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - INSTRUCTIONS.md
autonomous: true

must_haves:
  truths:
    - "Agent reads INSTRUCTIONS.md and understands project purpose"
    - "Agent knows session startup protocol (load STATE.md, check PAUSE.md, silent ready)"
    - "Agent understands command patterns (natural language and slash commands)"
    - "Agent knows file structure conventions (entities/, templates/, ops/)"
  artifacts:
    - path: "INSTRUCTIONS.md"
      provides: "Canonical agent instructions"
      min_lines: 80
      contains: "Session Protocol"
  key_links:
    - from: "INSTRUCTIONS.md"
      to: "STATE.md"
      via: "Session protocol references"
      pattern: "STATE\\.md"
    - from: "INSTRUCTIONS.md"
      to: "docs/protocols/"
      via: "Pointer to detailed documentation"
      pattern: "docs/protocols"
---

<objective>
Create INSTRUCTIONS.md as the canonical agent instruction file following the AGENTS.md standard.

Purpose: INSTRUCTIONS.md is the single source of truth for all agent behavior. It must be comprehensive enough that any AI agent (Claude Code, opencode, Cursor, codex) can operate the system by reading this file alone.

Output: `/INSTRUCTIONS.md` - Canonical agent instructions (~80-100 lines core behavior + pointers to docs/)
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-agent-instruction-layer/02-CONTEXT.md
@.planning/phases/02-agent-instruction-layer/02-RESEARCH.md
@CONFIG.md
@ROADMAP.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create INSTRUCTIONS.md canonical agent instructions</name>
  <files>INSTRUCTIONS.md</files>
  <action>
Create INSTRUCTIONS.md at project root following the AGENTS.md standard format.

**Structure (from RESEARCH.md recommendations):**

```markdown
# Agent Instructions: Agent PM

## Overview
- Project purpose: AI-powered project management for non-technical PMs
- Target user: Non-technical project managers (email/spreadsheet comfortable, not CLI/git)
- Key principle: All complexity hidden - user speaks naturally, agent handles mechanics

## Session Protocol
1. Load STATE.md (if exists) - contains active work context
2. Check PAUSE.md (if exists) - offer to resume if found
3. Silent ready - no greeting, no status summary, just await instructions
4. Load more context as needed (don't preload everything)

## File Structure
- `entities/` - Managed entities (clients, projects, etc)
- `templates/` - Document templates for entity creation
- `ops/` - Team operations and playbooks
- `CONFIG.md` - Entity type configuration
- `ROADMAP.md` - Master dashboard with all entities
- `STATE.md` - Current session state
- `docs/protocols/` - Detailed operational documentation
- `docs/guides/` - User-facing guides

## Command Patterns
Natural language and slash commands both work:
- "Process notes for Acme Corp" = `/process-notes Acme`
- "Show status of Beta Industries" = `/status Beta`
- Batch: "Process notes for Acme, Beta, and Gamma"

Confirmation rules:
- Destructive (delete, overwrite): Confirm first
- Read (show, list): Execute immediately
- Add (create, process): Execute immediately
- Batch (multiple entities): Show plan, ask to proceed

## Core Workflows
(Brief description - details in docs/protocols/)
- Entity onboarding: Create entity folder from templates
- Note processing: Extract tasks and updates from notes
- Status reporting: Generate summaries from entity roadmaps

## Code Style
- Plain English for all user-facing text (no jargon)
- Markdown for all documentation
- Git operations invisible to user (automated, silent)
- Checkbox syntax: [ ] todo, [-] in-progress, [x] done

## Error Handling
- Missing files: Offer to create ("STATE.md not found. Create it?")
- Stale context: Show situation, propose fix, ask user
- Operation failures: Save checkpoint, explain in plain English, offer recovery options

## Detailed Documentation
For complete protocols, see:
- `docs/protocols/session-protocol.md` - Full session initialization details
- `docs/protocols/command-patterns.md` - Command parsing and execution
- `docs/protocols/error-recovery.md` - Checkpoint and recovery patterns
- `docs/protocols/agent-optimization.md` - Agent-specific optimizations
```

**Key requirements from CONTEXT.md:**
- Core behavior ~50 lines, then pointers to docs/
- Token-efficient: don't repeat what's in docs/protocols/
- Agent-agnostic: works for Claude Code, opencode, Cursor, codex
- Silent start: no greeting
- Hybrid commands: natural language + slash format

**Do NOT include:**
- Verbose workflow details (those go in docs/protocols/)
- Agent-specific instructions (those go in wrappers)
- Skill definitions (Phase 4)
- Specialist definitions (Phase 5)
  </action>
  <verify>
1. File exists at `/INSTRUCTIONS.md`
2. File contains "Session Protocol" section
3. File contains "Command Patterns" section
4. File references `docs/protocols/` for details
5. File is 80-120 lines (concise but complete)
6. `grep -c "STATE.md" INSTRUCTIONS.md` returns >= 2 (referenced in session protocol)
  </verify>
  <done>
INSTRUCTIONS.md exists with:
- Overview section explaining project purpose and target user
- Session protocol (load STATE.md, check PAUSE.md, silent ready)
- File structure documentation
- Command patterns (natural language + slash commands)
- Core workflow summaries
- Pointers to docs/protocols/ for detailed documentation
  </done>
</task>

</tasks>

<verification>
- [ ] INSTRUCTIONS.md exists at project root
- [ ] Contains all required sections (Overview, Session Protocol, File Structure, Command Patterns, Core Workflows, Code Style, Error Handling, Detailed Documentation)
- [ ] References STATE.md and PAUSE.md by name
- [ ] Points to docs/protocols/ for detailed documentation
- [ ] Concise (~80-120 lines) - not verbose
- [ ] Agent-agnostic (no Claude/Cursor-specific content)
- [ ] Plain English throughout (no technical jargon)
</verification>

<success_criteria>
Any AI agent reading INSTRUCTIONS.md can:
1. Understand its role (PM assistant for non-technical users)
2. Know the session startup sequence
3. Parse user commands (natural language or slash format)
4. Find detailed documentation when needed
5. Handle errors gracefully with plain English explanations
</success_criteria>

<output>
After completion, create `.planning/phases/02-agent-instruction-layer/02-01-SUMMARY.md`
</output>
